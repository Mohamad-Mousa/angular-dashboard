<label [class.required]="required" [class.has-error]="hasError">
  @if (label) {
  <span>{{ label }}@if (required) {<span class="text-danger">*</span>}</span>
  }
  
  @switch (type) {
    @case ('textarea') {
      <div class="input-wrapper">
        <textarea
          [value]="value"
          [placeholder]="placeholder"
          [disabled]="disabled || readonly"
          [readonly]="readonly"
          [attr.maxlength]="maxlength"
          [attr.minlength]="minlength"
          [rows]="rows || 3"
          [attr.autocomplete]="autocomplete"
          (input)="onInputChange($event)"
          (blur)="onBlur()"
          class="form-control"
          [class.is-invalid]="hasError">
        </textarea>
        @if (hasError) {
          <span class="material-symbols-rounded error-icon" aria-hidden="true">error</span>
        }
      </div>
    }
    @case ('select') {
      <div class="input-wrapper">
        <select
          [value]="value ?? ''"
          [disabled]="disabled"
          [required]="required"
          (change)="onInputChange($event)"
          (blur)="onBlur()"
          class="form-select"
          [class.is-invalid]="hasError">
          @if (!required) {
            <option [value]="''">{{ placeholder || 'Select an option' }}</option>
          }
          @for (option of options; track option.value) {
            <option [value]="option.value" [disabled]="option.disabled">
              {{ option.label }}
            </option>
          }
        </select>
        @if (hasError) {
          <span class="material-symbols-rounded error-icon" aria-hidden="true">error</span>
        }
      </div>
    }
    @default {
      <div class="input-wrapper">
        <input
          [type]="type"
          [value]="value"
          [placeholder]="placeholder"
          [disabled]="disabled || readonly"
          [readonly]="readonly"
          [required]="required"
          [min]="min"
          [max]="max"
          [step]="step"
          [attr.maxlength]="maxlength"
          [attr.minlength]="minlength"
          [attr.autocomplete]="autocomplete"
          (input)="onInputChange($event)"
          (blur)="onBlur()"
          class="form-control"
          [class.is-invalid]="hasError" />
        @if (hasError) {
          <span class="material-symbols-rounded error-icon" aria-hidden="true">error</span>
        }
      </div>
    }
  }

  @if (hint && !hasError) {
    <small class="form-text text-muted">{{ hint }}</small>
  }
  
  @if (hasError) {
    <small class="error-text">{{ errorText }}</small>
  }
</label>

